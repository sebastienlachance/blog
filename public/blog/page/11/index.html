
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Sebastien Lachance</title>
  <meta name="author" content="Sebastien Lachance">

  
  <meta name="description" content="I haven&#8217;t really used delegates since I was programming with the .NET Framework 1.0. Since I have some spare time left, I decided to &#8216;&# &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sebastienlachance.com/blog/page/11">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/sebastienlachance/feed" rel="alternate" title="Sebastien Lachance" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-10165653-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Sebastien Lachance</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/sebastienlachance/feed" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sebastienlachance.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/resume">Resume</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/refreshing-my-memory-delegates-in-c/">Refreshing my memory : Delegates in C#</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-09T07:12:00-04:00" pubdate data-updated="true">Apr 9<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I haven&#8217;t really used delegates since I was programming with the .NET Framework 1.0. Since I have some spare time left, I decided to &#8216;&#8220;refresh my memory&#8221;. I have prepared a little cheat-sheet that you can use as a reminder for the delegates functionalities in the .NET Framework 3.0.</p>


<p><strong>1. What is a delegate?</strong></p>


<p>A delegate is a data structure that refers to one or multiples static methods and/or instance methods. You can use this when you have a dynamic list of methods to be called that you don&#8217;t know ahead of time.</p>


<p><strong>2. How to create a delegate?</strong></p>


<pre style="border-style: none; margin: 0pt; padding: 0pt; overflow: visible; font-size: 8pt; width: 100%; color: black; line-height: 12pt; font-family: consolas,'Courier New',courier,monospace; background-color: #f4f4f4;"><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> TestClass<br />{<br />    <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">delegate</span> <span style="color: #0000ff;">void</span> myDelegate(<span style="color: #0000ff;">string</span> name);<br />}</pre>


<p>The signature of the declaration is very important! The methods that will be contained in the delegate must perfectly match the declaration. In this case, the methods that will be allowed must be void and take a single string as a parameter.</p>


<p>When using the delegate keyword, you are actually creating a <strong>System.MulticastDelegate</strong>.</p>


<p>&nbsp;</p>


<p><strong>3. How do I instantiate a delegate?</strong></p>


<div>
<pre style="border-style: none; margin: 0pt; padding: 0pt; overflow: visible; font-size: 8pt; width: 100%; color: black; line-height: 12pt; font-family: consolas,'Courier New',courier,monospace; background-color: #f4f4f4;"><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> TestMethod()<br />{<br />    ClassTest test = <span style="color: #0000ff;">new</span> ClassTest();<br /><br />    <span style="color: #008000;">//Instantiating a delegate with an instance method</span><br />    var del1 = <span style="color: #0000ff;">new</span> myDelegate(test.InstanceMethod);<br /><br />    <span style="color: #008000;">//Instantiating a delegate with a static method</span><br />    var del2 = <span style="color: #0000ff;">new</span> myDelegate(ClassTest.StaticMethod)<br />}</pre>
</div>


<p>&nbsp;</p>


<p><strong>4. How do I call the method contained in the delegate?</strong></p>


<div>
<pre style="border-style: none; margin: 0pt; padding: 0pt; overflow: visible; font-size: 8pt; width: 100%; color: black; line-height: 12pt; font-family: consolas,'Courier New',courier,monospace; background-color: #f4f4f4;">del1.Invoke(<span style="color: #006080;">"This is a test."</span>);</pre>
</div>


<p>The <strong>Invoke method</strong> will actually have the same signature as your delegate signature. So you benefit of a strongly-typed way to use the delegate feature. There is also a BeginInvoke and an EndInvoke method to program asynchronously.</p>


<p><strong>5. But you said that you can have more than one method in the delegate?</strong></p>


<p>Actually yes. There is several ways to add more methods, but the easiest way is :</p>


<div>
<pre style="border-style: none; margin: 0pt; padding: 0pt; overflow: visible; font-size: 8pt; width: 100%; color: black; line-height: 12pt; font-family: consolas,'Courier New',courier,monospace; background-color: #f4f4f4;">del1 += ClassTest.StaticMethod;</pre>
</div>


<p>When calling Invoke (or BeginInvoke) each one will be executed in the order that they were added to the delegate. If an exception occurs at any point, the execution is canceled and the remaining methods will not be called. And you will get an exception of course.</p>


<p><strong>5. Anything else?</strong></p>


<p>Yes, a delegate is immutable. Each time you add a method entry point, a new delegate is created for you.</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/a-new-job/">A new job</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-04-05T07:10:00-04:00" pubdate data-updated="true">Apr 5<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last week, I have left my job at bxsystems. I had an opportunity that I could not refuse. I have worked for 3 years and 8 months with the most talented peoples I ever encountered. They are great professionals and I am sure they will continue to be successful in their careers. This is where all started for me, where I started to get passionate about programming. I had a lot of freedom and a lot of learning opportunities.</p>


<p>I am very grateful for everything. For a beginner, it could not be a better place. Thank you!</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/the-importance-of-database-versioning/">The importance of database versioning</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-12T07:08:00-04:00" pubdate data-updated="true">Mar 12<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>2-3 months ago, I have deployed the application I was working on the client. Since then a lot of changes have been made and I did not work on this project. The database changed significantly but the sql script have not been updated with the latest changes. Now, I have to get back on the project to make an update to the client. I can generate a new set of scripts to create a new database, but how am I suppose to update the production database &#8230;</p>


<p>Before I left, I gave instruction on how to version every changes to the database. I wanted to have scripts with every changes that have been made and then run them on the client on future update.</p>


<p>Let&#8217;s see the pros and cons of not doing so :</p>


<p>PROS :</p>


<ul>
<li>Save time when developing</li>
</ul>


<p>CONS :</p>


<ul>
<li>No way to easily update an existing database </li>
<li>Loose time trying to figure out what is changed </li>
<li>No confidence that you will update the existing database correctly </li>
<li>No way to get back in time if needed</li>
</ul>


<p>Please, version your sql script! It will be much easier for those doing the futur work.</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/cannot-have-multiple-items-selected-in-a-dropdownlist/">Cannot have multiple items selected in a DropDownList</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-08T08:09:00-05:00" pubdate data-updated="true">Mar 8<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h4><em>Cannot have multiple items selected in a DropDownList.</em></h4>


<p><strong>Description: </strong>An unhandled exception occurred during the execution of  the current web request. Please review the stack trace for more information  about the error and where it originated in the code. <br /><strong>Exception Details: </strong>System.Web.HttpException: Cannot have multiple items selected in a  DropDownList. <br /><strong>Source Error:</strong></p>


<p>&nbsp;</p>


<pre>Line 253:  total = parseFloat(lblTotal.innerHTML.replace('$', '').replace(',', '.'));<br />Line 254:  fBudget = parseFloat(budget.replace('$', '').replace(',', '.'));<br />Line 255:  var lblWarningContract = document.getElementById('&lt;%= lblWarningContract.ClientID %&gt;');<br />Line 256:                        <br />Line 257:  if (total &gt; fBudget)</pre>


<p>I spent at least one hour figuring this out. The <strong>Source  Error</strong>&nbsp; does not contain any valid information. After a lot of  debugging, I finally found the solution : you should never use the same item  twice on two different dropdownlist.</p>


<div>
<pre style="border-style: none; margin: 0px; padding: 0px; overflow: visible; line-height: 12pt; background-color: #f4f4f4; width: 100%; font-family: consolas,'Courier New',courier,monospace; color: black; font-size: 8pt;">ListItem item = <span style="color: #0000ff;">new</span> ListItem(<span style="color: #006080;">" -- Select one -- "</span>, <span style="color: #006080;">"-1"</span>);<br /><br />ddlLoadingContact.Items.Insert(0, item);<br />ddlUnloadingContact.Items.Insert(0, item);</pre>
</div>


<p>&nbsp;</p>


<p>A <strong>ListItem</strong> have a property called <strong>Selected</strong> that tells which one (the item) the dropdownlist should display as selected. If  you use the same ListItem in more that one dropdownlist and you select this item  in the DropDownA and a different item in DropDownB. The DropDownB will have two  ListItem with the Selected property set to <strong>true</strong>. Since this is  the same item in both dropdownlist.</p>


<div>
<pre style="border-style: none; margin: 0px; padding: 0px; overflow: visible; line-height: 12pt; background-color: #f4f4f4; width: 100%; font-family: consolas,'Courier New',courier,monospace; color: black; font-size: 8pt;">ddlLoadingContact.SelectedValue = <span style="color: #006080;">"-1"</span>; <span style="color: #008000;">//item will have the Selected property set to true</span><br />ddlUnloadingContact.SelectedValue = <span style="color: #006080;">"John"</span>; <span style="color: #008000;"> //another item will have the Selected property set to <span style="color: #0000ff;">true</span>. And both are contained <span style="color: #0000ff;">in</span> <span style="color: #0000ff;">this</span> dropdownlist.</span></pre>
</div>


<div>&nbsp;</div>


<div>
<div class="wlWriterSmartContent" style="margin: 0px; padding: 0px; display: inline; float: none;">del.icio.us Tags: <a rel="tag" href="http://del.icio.us/popular/DropDownList">DropDownList</a>,<a rel="tag" href="http://del.icio.us/popular/ASP.NET">ASP.NET</a>,<a rel="tag" href="http://del.icio.us/popular/multiple%20items%20selected">multiple  items selected</a></div>
</div>


<div>&nbsp;</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/my-experience-as-a-remote-worker/">My experience as a remote worker</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-06T05:58:00-05:00" pubdate data-updated="true">Mar 6<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>You may not know, but I am a full time web worker since February 2007 and I am loving it. I followed my girlfriend to his new job in mechanical engineering located in the &#8220;Beauce&#8221; area in the province of Qu&eacute;bec (1 hour from Qu&eacute;bec City). But let&#8217;s make a point clear. It was not as easy as it sounds. It takes a lot of discipline and you may find that you just can&#8217;t do it. I have had many friends who were not able to work from home. For me, it was easy since it&#8217;s a childhood dream. I have gone through 3 phases.</p>


<p>The first one is the &#8220;That&#8217;s easy&#8221; phase. During the first 2 months, everything seemed so easy. I was very productive and enjoyed every minutes working from home. This is also the phase were you work more than you are supposed and keep no free time. You have the impression you can achieve anything.</p>


<p>I called the second phase : &#8220;I need to check everything around the house to be sure nothing changed.&#8221;. In this phase, everything disturbed me. I started to feel lonely and was wondering if I made the right choice. During this 6 months phase I had a hard time concentrating on my job. It&#8217;s also the time we were building our new home. During that time, I never took a day off except the day we moved in. I was exhausted, stressed and lost. We had problems with contractors. The price we anticipated was a bit higher due to the angle of the lot we bought. To make things worst, I started working on a new project requiring me to work with <a href="http://sebastienlachance.com/2008/01/07/nightmare-platform/">Microsoft Dynamics</a> (until you used the supplied API you can&#8217;t imagine how frustrating of an experience it is). But I have gone through it.</p>


<p>Now, I am in the third phase. I called it the &#8220;Rebirth phase&#8221;. I restarted my old habit of learning as much as I can. I have solved my concentration problem. I feel a lot more happier and a lot more in health. I started to really enjoy working remotely and I am sure I am as productive as I was before. I am now fully happy with it. And I have new projects for my region&#8230;</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/i-am-now-available-to-hire-%21/">I am now available to hire !</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-03T05:56:00-05:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am now available to work on small contracts for now. I also want to work remotely. If you are interested, just let me know via the contact form.</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/getting-started-with-nhibernate/">Getting started with NHibernate</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-03-03T05:48:00-05:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Without digging in too much detail about NHibernate, I will presume you are familiar with what this O/R Mapper can do.</p>


<p><span style="text-decoration: underline;"><strong>The application configuration file :</strong> </span></p>


<div>
<pre style="border-style: none; margin: 0pt; padding: 0pt; overflow: visible; font-size: 8pt; width: 100%; color: black; line-height: 12pt; font-family: consolas,'Courier New',courier,monospace; background-color: #f4f4f4;"><span style="color: #0000ff;">&lt;?</span><span style="color: #800000;">xml</span> <span style="color: #ff0000;">version</span><span style="color: #0000ff;">="1.0"</span> <span style="color: #ff0000;">encoding</span><span style="color: #0000ff;">="utf-8"</span> ?<span style="color: #0000ff;">&gt;</span><br /><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">configuration</span><span style="color: #0000ff;">&gt;</span><br />  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">configSections</span><span style="color: #0000ff;">&gt;</span><br />    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">section</span> <span style="color: #ff0000;">name</span><span style="color: #0000ff;">="hibernate-configuration"</span> <span style="color: #ff0000;">type</span><span style="color: #0000ff;">="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate"</span> <span style="color: #0000ff;">/&gt;</span><br />  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">configSections</span><span style="color: #0000ff;">&gt;</span><br />  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">hibernate-configuration</span> <span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="urn:nhibernate-configuration-2.2"</span><span style="color: #0000ff;">&gt;</span><br />    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">session-factory</span><span style="color: #0000ff;">&gt;</span><br />      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span> <span style="color: #ff0000;">name</span><span style="color: #0000ff;">="connection.driver_class"</span><span style="color: #0000ff;">&gt;</span>NHibernate.Driver.SqlClientDriver<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br />      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span> <span style="color: #ff0000;">name</span><span style="color: #0000ff;">="hibernate.dialect"</span><span style="color: #0000ff;">&gt;</span>NHibernate.Dialect.MsSql2005Dialect<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br />      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span> <span style="color: #ff0000;">name</span><span style="color: #0000ff;">="hibernate.connection.provider"</span><span style="color: #0000ff;">&gt;</span>NHibernate.Connection.DriverConnectionProvider<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br />      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span> <span style="color: #ff0000;">name</span><span style="color: #0000ff;">="hibernate.connection.connection_string"</span><span style="color: #0000ff;">&gt;</span>Server=.SQLEXPRESS;Initial Catalog=RecipeHelperTest;User Id=recipeuser;Password=recipeuser;<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">property</span><span style="color: #0000ff;">&gt;</span><br />      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">mapping</span> <span style="color: #ff0000;">assembly</span><span style="color: #0000ff;">="RecipeHelper.Domain"</span> <span style="color: #0000ff;">/&gt;</span><br />    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">session-factory</span><span style="color: #0000ff;">&gt;</span><br />  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">hibernate-configuration</span><span style="color: #0000ff;">&gt;</span><br /><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">configuration</span><span style="color: #0000ff;">&gt;</span></pre>
</div>


<p>This is standard stuff that you can find in the documentation. One interesting point however is the mapping. You can specify where your domain object to be persisted are. This will allow you to not worry about specifying them in code.</p>


<p><span style="text-decoration: underline;"><strong>Creating a mapping file :</strong></span></p>


<p>To be able to persist your entities, you&#8217;ll need to create a mapping file. In my opinion, this is the hardest thing to learn about NHibernate. But don&#8217;t worry, it is well documented.</p>


<p>The strategy I am using is one file per entities, in the same assembly. I also use the same name with the extension &#8220;.hbm.xml&#8221;. The trickiest part is that you need to set the <strong>Build Action</strong> to &#8221;<strong>Embedded Resource</strong>&#8221;. Once all this is completed you can now start writing your mapping information :</p>


<div>
<pre style="border-style: none; margin: 0pt; padding: 0pt; overflow: visible; font-size: 8pt; width: 100%; color: black; line-height: 12pt; font-family: consolas,'Courier New',courier,monospace; background-color: #f4f4f4;"><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">hibernate-mapping</span> <span style="color: #ff0000;">xmlns</span><span style="color: #0000ff;">="urn:nhibernate-mapping-2.2"</span> <span style="color: #ff0000;">assembly</span><span style="color: #0000ff;">="RecipeHelper.Domain"</span> <span style="color: #ff0000;">namespace</span><span style="color: #0000ff;">="RecipeHelper.Domain"</span> <span style="color: #ff0000;">default-lazy</span><span style="color: #0000ff;">="false"</span><span style="color: #0000ff;">&gt;</span><br />  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">class</span> <span style="color: #ff0000;">name</span><span style="color: #0000ff;">="Recipe"</span> <span style="color: #ff0000;">table</span><span style="color: #0000ff;">="Recipes"</span> <span style="color: #0000ff;">&gt;</span><br />    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">id</span> <span style="color: #ff0000;">name</span><span style="color: #0000ff;">="ID"</span> <span style="color: #ff0000;">column</span><span style="color: #0000ff;">="ID"</span> <span style="color: #ff0000;">type</span><span style="color: #0000ff;">="int"</span> <span style="color: #ff0000;">access</span><span style="color: #0000ff;">="field.lowercase-underscore"</span><span style="color: #0000ff;">&gt;</span><br />      <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">generator</span> <span style="color: #ff0000;">class</span><span style="color: #0000ff;">="native"</span> <span style="color: #0000ff;">/&gt;</span><br />    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">id</span><span style="color: #0000ff;">&gt;</span><br />    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span> <span style="color: #ff0000;">name</span><span style="color: #0000ff;">="Name"</span> <span style="color: #ff0000;">column</span><span style="color: #0000ff;">="Name"</span> <span style="color: #ff0000;">type</span><span style="color: #0000ff;">="string"</span> <span style="color: #ff0000;">not-null</span><span style="color: #0000ff;">="false"</span><span style="color: #0000ff;">/&gt;</span><br />    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span> <span style="color: #ff0000;">name</span><span style="color: #0000ff;">="Reference"</span> <span style="color: #ff0000;">column</span><span style="color: #0000ff;">="Reference"</span> <span style="color: #ff0000;">type</span><span style="color: #0000ff;">="string"</span> <span style="color: #ff0000;">not-null</span><span style="color: #0000ff;">="false"</span> <span style="color: #0000ff;">/&gt;</span><br />    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">property</span> <span style="color: #ff0000;">name</span><span style="color: #0000ff;">="Rating"</span> <span style="color: #ff0000;">column</span><span style="color: #0000ff;">="Rating"</span> <span style="color: #ff0000;">type</span><span style="color: #0000ff;">="int"</span> <span style="color: #ff0000;">not-null</span><span style="color: #0000ff;">="false"</span> <span style="color: #0000ff;">/&gt;</span><br />  <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">class</span><span style="color: #0000ff;">&gt;</span><br /><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">hibernate-mapping</span><span style="color: #0000ff;">&gt;</span></pre>
</div>


<p><span style="text-decoration: underline;"><strong>Preparation for using NHibernate :</strong></span></p>


<p>The biggest performance hit is the creation of the ISessionFactory. For this reason, it should only be instantiated once. I created a singleton that will allow me to have access to a single session factory.</p>


<div>
<pre style="border-style: none; margin: 0pt; padding: 0pt; overflow: visible; font-size: 8pt; width: 100%; color: black; line-height: 12pt; font-family: consolas,'Courier New',courier,monospace; background-color: #f4f4f4;"><span style="color: #0000ff;">using</span> NHibernate;<br /><span style="color: #0000ff;">using</span> NHibernate.Cfg;<br /><span style="color: #0000ff;">using</span> NHibernate.Tool.hbm2ddl;<br /><br /><span style="color: #0000ff;">namespace</span> RecipeHelper.Domain<br />{<br />    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> NHibernateConfig<br />    {<br />        <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> ISessionFactory _sessionFactory;<br /><br />        <span style="color: #0000ff;">static</span> NHibernateConfig()<br />        {<br />            Configuration config = <span style="color: #0000ff;">new</span> Configuration();<br /><br />            _sessionFactory = config.Configure().BuildSessionFactory();<br />        }<br /><br />        <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> ISessionFactory GetSessionFactory()<br />        {<br />            <span style="color: #0000ff;">return</span> _sessionFactory;<br />        }<br /><br />    }<br />}</pre>
</div>


<p><strong><span style="text-decoration: underline;">Conclusion : </span></strong></p>


<p>This isn&#8217;t a complete tutorial to get started with NHibernate but should cover the essential steps to prepare your project to use it.</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/readonlycollection3ct3e/">Create a read-only collection with ReadOnlyCollection<T></a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-26T04:18:00-05:00" pubdate data-updated="true">Feb 26<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><span style="text-decoration: underline;"><strong>Problem :</strong> </span></p>


<p>I have a collection of entities in my repository. Those entities are not supposed to be visible to the outside world. But, In a test I am supposed to see if all objects are still there and I can&#8217;t use the GetAll method because it goes to the database and return everything, not just the collection of entities in my repository.</p>


<p><span style="text-decoration: underline;"><strong>Solution :</strong></span></p>


<p>I could expose the collection but how can I be sure that nothing will be changed. I could create a copy of the collection but that would not reflect the &#8220;Entity&#8221; concept. I know that Java has support for returning a read-only collection. A little bit of search and I found the class <strong>ReadOnlyCollection&lt;T&gt;.</strong> This is thread-safe and any changes to the original collection will be reflected in it since it is only a wrapper.</p>


<div>
<pre style="line-height: 12pt; background-color: #f4f4f4; margin: 0px; width: 100%; font-family: consolas, 'Courier New', courier, monospace; color: black; font-size: 8pt; overflow: visible; border-style: none; padding: 0px;"><span style="color: #0000ff">public</span> <span style="color: #0000ff">static</span> IList&lt;IRecipe&gt; _identityMap = <span style="color: #0000ff">new</span> List&lt;IRecipe&gt;();

  <span style="color: #0000ff">public</span> IList&lt;IRecipe&gt; IdentityMap
  {
      get { <span style="color: #0000ff">return</span> <span style="color: #0000ff">new</span> ReadOnlyCollection&lt;IRecipe&gt;(_identityMap); }
  }</pre>
</div>


<p>Could not be easier!</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/unit-of-work/">Unit Of Work</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-22T05:47:00-05:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is an interesting pattern. I was using it without giving it a name. I encountered this pattern while reading the <a class="v1" target="_new">Jimmy&nbsp;Nilsson</a>&#8217;s book : Applying Domain-Driven Design and Patterns - With Examples in C# and .NET. The Unit Of Work is a way to create a logical group of object. The most basic example I can think of is the example of an Order. An order contains OrderLines. The Order and the OrderLines are part of the same logical group. We say that this is an Unit Of Work. I tend to think of it at the way I&#8217;ll save the Order. Do I call a service to insert the Order and another to save the OrderLines? Or do I call a single service that will persist it all at the same time (maybe using a transaction)? I will use a single service that will save the Order, the OrderLines and all other related information. Everything that must be persisted at the same time is said to be an Unit Of Work.</p>


<p>In the RecipeHelper project (the personnal project I am working on), I have a single Unit Or Work (at the moment). The Recipe is the root and contains a list of steps to follow and a list of ingredients. When I persist a recipe, I persist everything in the object graph.</p>


<p>Here is some resources from experts that can help you more with applying this pattern :</p>


<ul>
<li><a title="http://www.martinfowler.com/eaaCatalog/unitOfWork.html" href="http://www.martinfowler.com/eaaCatalog/unitOfWork.html">P of EAA: Unit of Work</a></li>
<li><a href="http://www.hibernate.org/42.html">NHibernate and Unit Of Work</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/setting_up_a_basic_continuous_integration_server_with_teamcity/">Setting up a basic continuous integration server with TeamCity</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-02-08T12:00:00-05:00" pubdate data-updated="true">Feb 8<span>th</span>, 2008</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p> <p>What is TeamCity? It&#8217;s a software that you would use to do <a href="http://martinfowler.com/articles/continuousIntegration.html" target="_blank">continuous integration</a>. Continuous integration is very important and it should never be an option on a serious project (that&#8217;s is my opinion and I strongly believe in the values it provide).</p></p>

<p>If you have followed the <a href="http://sebastienlachance.com/building-a-new-application-series/" target="_blank">Building A New Application Series</a>, you may be wondering why I would want to do that after setting up a complete integration server with CruiseControl.NET. Well, I was skeptical when I first heard about all the fuss surrounding this <a href="http://www.jetbrains.com/" target="_blank">JetBrains</a> project. After all, CruiseControl.NET was doing everything I wanted and more.</p>


<p>So the reason I made the switch is because of the time it take to set it up : 20 minutes. Everything was fully functional in under 20 minutes. I absolutely got no error at all. I just got through all the step of the wizard and then : done. Unit testing, code coverage, build, reports, etc&#8230; And it&#8217;s absolutely free for small team.</p>


<p>The big downside for me was the lack of support out of the box for other unit testing framework (other than NUnit and MSTest). My project is using MbUnit so I will need to do some more research to integrate it in my build process. But it is possible if you want to invest time in doing so.</p>


<p>So let&#8217;s get started with this little tutorial :</p>


<p>1. Download <a href="http://www.jetbrains.com/teamcity/" target="_blank">TeamCity</a>.</p>


<p>2. Start the installation.</p>


<p>Just follow all the steps. I encountered a slight problem due to something already on port 80, so I used the port 8080.</p>


<p><a title="TeamCity_001" href="http://www.flickr.com/photos/63483657@N00/2246121387/"><img src="http://static.flickr.com/2295/2246121387_bf1eaae094.jpg" border="0" alt="TeamCity_001"></a></p>


<p><a title="TeamCity_002" href="http://www.flickr.com/photos/63483657@N00/2246121389/"><img src="http://static.flickr.com/2366/2246121389_06f17f5d5e.jpg" border="0" alt="TeamCity_002"></a></p>


<p><a title="TeamCity_003" href="http://www.flickr.com/photos/63483657@N00/2246121395/"><img src="http://static.flickr.com/2391/2246121395_a81b1d955c.jpg" border="0" alt="TeamCity_003"></a></p>


<p><a title="TeamCity_004" href="http://www.flickr.com/photos/63483657@N00/2246121397/"><img src="http://static.flickr.com/2266/2246121397_d27ffa9754.jpg" border="0" alt="TeamCity_004"></a></p>


<p><a title="TeamCity_005" href="http://www.flickr.com/photos/63483657@N00/2246121399/"><img src="http://static.flickr.com/2164/2246121399_a18dd1cc62.jpg" border="0" alt="TeamCity_005"></a></p>


<p><a title="TeamCity_006" href="http://www.flickr.com/photos/63483657@N00/2246121401/"><img src="http://static.flickr.com/2345/2246121401_5db16b8ce5.jpg" border="0" alt="TeamCity_006"></a></p>


<p><a title="TeamCity_007" href="http://www.flickr.com/photos/63483657@N00/2246123377/"><img src="http://static.flickr.com/2175/2246123377_676d0d312b.jpg" border="0" alt="TeamCity_007"></a></p>


<p>I left everything intact in this screen, but this is where you specify some default folder used bu the build agents. The <strong>tempDir </strong>and<strong> workDir</strong> will be used to store your application artifacts and even your source file before the compilation if you don&#8217;t give it one in the configuration (later).</p>


<p><a title="TeamCity_008" href="http://www.flickr.com/photos/63483657@N00/2246123379/"><img src="http://static.flickr.com/2064/2246123379_b4b8438c38.jpg" border="0" alt="TeamCity_008"></a></p>


<p><a title="TeamCity_009" href="http://www.flickr.com/photos/63483657@N00/2246123381/"><img src="http://static.flickr.com/2389/2246123381_34aa922d4a.jpg" border="0" alt="TeamCity_009"></a></p>


<p><a title="TeamCity_010" href="http://www.flickr.com/photos/63483657@N00/2246123385/"><img src="http://static.flickr.com/2295/2246123385_74a8416c54.jpg" border="0" alt="TeamCity_010"></a></p>


<p>That&#8217;s it, you have installed TeamCity. Now let&#8217;s add our project to it.</p>


<p>3. Open TeamCity !!!</p>


<p><a title="TeamCity_011" href="http://www.flickr.com/photos/63483657@N00/2246123387/"><img src="http://static.flickr.com/2410/2246123387_81dfdba0b9.jpg" border="0" alt="TeamCity_011"></a></p>


<p><a title="TeamCity_012" href="http://www.flickr.com/photos/63483657@N00/2246123391/"><img src="http://static.flickr.com/2087/2246123391_e1d68c0e3f.jpg" border="0" alt="TeamCity_012"></a></p>


<p>Nothing too complicated here, just enter the username/password you want for the administrator account. The email will be used to sent important information the build server would want you to know..</p>


<p><a title="TeamCity_013" href="http://www.flickr.com/photos/63483657@N00/2246920958/"><img src="http://static.flickr.com/2136/2246920958_abb96960eb.jpg" border="0" alt="TeamCity_013"></a></p>


<p>What I like is that you will be taken by the hannd for the rest of the steps. Click on the <strong>Create Project</strong> link.</p>


<p><a title="TeamCity_014" href="http://www.flickr.com/photos/63483657@N00/2246920960/"><img src="http://static.flickr.com/2070/2246920960_202f0716f0.jpg" border="0" alt="TeamCity_014"></a></p>


<p>Name of the project and a description. It will be useful if several projects are on the same build server.</p>


<p><a title="TeamCity_016" href="http://www.flickr.com/photos/63483657@N00/2246920966/"><img src="http://static.flickr.com/2098/2246920966_e3a40f81d3.jpg" border="0" alt="TeamCity_016"></a></p>


<p>Now click the <strong>Create build configuration</strong> link. You can have multiple build configuration by project.</p>


<p><a title="TeamCity_019" href="http://www.flickr.com/photos/63483657@N00/2246989440/"><img src="http://static.flickr.com/2191/2246989440_434968e2cb.jpg" border="0" alt="TeamCity_019"></a></p>


<p>In the build configuration window, you can change the way the build number are generated and the default behavior when the build fail. You can also specify that you want to start with a clean project.</p>


<p><a title="TeamCity_020" href="http://www.flickr.com/photos/63483657@N00/2246989444/"><img src="http://static.flickr.com/2210/2246989444_fdf5ddc886.jpg" border="0" alt="TeamCity_020"></a></p>


<p>There, you can decide how you want the project to be retrieved from the source control repository and where to put him. You can also decide when to label your build. If you do not want a label on a failed build, you can do so. Next, click on <strong>Choose build runner.</strong></p>


<p><a title="TeamCity_021" href="http://www.flickr.com/photos/63483657@N00/2246989450/"><img src="http://static.flickr.com/2062/2246989450_83d90c26fc.jpg" border="0" alt="TeamCity_021"></a></p>


<p>TeamCity is not only for .NET project. Several build runner are included such as MSBuild, NAnt, sln2003, sln2005, sln2008, Ant, Maven2, etc&#8230; Because I am using MbUnit as a testing framework I have decided to stick with MSBuild. But if you are using NUnit or MSTest you may want to use sln2003, sln2005, sln2008 as they can run your unit tests and tell the coverage of your assemblies. You need to fill in the <strong>Solution File Path</strong> field with the name of your .sln, it&#8217;s relative to your project structure (if it&#8217;s in the root, enter only the name of your solution file. Fill the rest of the field if you are using NUnit or MSTest.</p>


<p><a title="TeamCity_022" href="http://www.flickr.com/photos/63483657@N00/2246989456/"><img src="http://static.flickr.com/2237/2246989456_ca5e393444.jpg" border="0" alt="TeamCity_022"></a></p>


<p>Last step! Go to the <strong>Version Control Settings</strong> tab and click <strong>Create and attach new VCS root</strong>. Give it a name and choose the version control system (VCS) you want to use. Fill in the required field.</p>


<p>Save, and you&#8217;re done!</p>


<p>This is the most basic setup you can have. Of course, there is a lot of other things to configure to your specific needs. You can even have integration inside Visual Studio or Eclipse. As I said before the only downside I found is the lack of support for MbUnit, but I will work something to bypass that.</p>


<p>I may do another post going more in depth if I have time. Or maybe a screencast, that would be a lot of fun. If you&#8217;re interested, just leave a comment and I will consider it.</p>



</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/12/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/10/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <img src="/images/me.png" />
  <p>Sebastien Lachance, programmer since 2003.</p>
  <p>I am an entrepreneur and consultant. I have launched the <a href="http://www.guidedescommercesdebeauce.com">Guide des Commerces</a> in 2011, a project with great potential and had a lot of fun making it. 
  </p>
  <p>
    I&#8217;m a web developer specialized in Rails and ASP.NET MVC. I have a background in business applications but I really enjoy making any kind of software. 
  </p>
  <p>
    I do believe in the power of twitter, but I dont use it as much as I would.
    But feel free to follow me anyway :).
  </p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/available/">Available</a>
      </li>
    
      <li class="post">
        <a href="/blog/disponible/">Disponible pour mandat de développement</a>
      </li>
    
      <li class="post">
        <a href="/blog/rerun-all-guards/">Rerun all Guards</a>
      </li>
    
      <li class="post">
        <a href="/blog/help-needed-a-backbone-blog/">Help needed, A Backbone blog</a>
      </li>
    
      <li class="post">
        <a href="/blog/filling-a-select-from-an-array-on-javascript-object/">Filling a select from an array on javascript object</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/sebastienlachance">@sebastienlachance</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sebastienlachance',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("slachance", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/slachance" class="twitter-follow-button" data-show-count="true">Follow @slachance</a>
  
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Sebastien Lachance -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sebastienlachance';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
